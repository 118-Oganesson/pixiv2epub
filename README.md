# Pixiv to EPUB Converter

<!-- markdownlint-disable MD033 -->
<p align="center">
  <img src="./pixiv2epub_icon.svg" alt="Pixiv to EPUB Converter Icon" width="250">
</p>

<p align="center">
  <!-- Badges -->
  <a href="https://github.com/astral-sh/uv">
    <img src="https://img.shields.io/badge/managed%20by-uv-black.svg?style=flat&labelColor=black" alt="Managed by uv">
  </a>
  <img src="https://img.shields.io/badge/python-3.13%2B-blue.svg?style=flat" alt="Python 3.13+">
</p>

Pixivã®å°èª¬ã‚’URLã‚„IDã§æŒ‡å®šã—ã€é«˜å“è³ªãªEPUBå½¢å¼ã«å¤‰æ›ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

---

## âœ¨ ä¸»ãªæ©Ÿèƒ½

- **æ°¸ç¶šçš„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨å·®åˆ†æ›´æ–°**  
  ä¸€åº¦å–å¾—ã—ãŸå°èª¬ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã«æ°¸ç¶šåŒ–ã•ã‚Œã¾ã™ã€‚äºŒå›ç›®ä»¥é™ã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å¤‰æ›´ã‚’è‡ªå‹•ã§æ¤œçŸ¥ã—ã€æ›´æ–°ãŒã‚ã£ãŸä½œå“ã®ã¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã€é«˜é€Ÿã‹ã¤åŠ¹ç‡çš„ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æœ€æ–°ã®çŠ¶æ…‹ã«ä¿ã¦ã¾ã™ã€‚

- **å®‰å®šã—ãŸæ›¸ç±ç®¡ç†**  
  å°èª¬ã”ã¨ã«æ±ºå®šè«–çš„ãªIDã‚’EPUBã«ä»˜ä¸ã™ã‚‹ãŸã‚ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ã¦ã‚‚é›»å­æ›¸ç±ãƒªãƒ¼ãƒ€ãƒ¼ä¸Šã§åˆ¥ã®æœ¬ã¨ã—ã¦é‡è¤‡ã™ã‚‹ã“ã¨ãªãã€èª­æ›¸é€²æ—ã‚„ãƒ¡ãƒ¢ãŒç¶­æŒã•ã‚Œã¾ã™ã€‚

- **é«˜å“è³ªãªEPUB3ç”Ÿæˆ**  
  å°èª¬æœ¬æ–‡ã€æŒ¿çµµã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€ç›®æ¬¡ã‚„ä½œå“æƒ…å ±ãƒšãƒ¼ã‚¸ã‚’å«ã‚€EPUB3ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

- **GUIãƒ¢ãƒ¼ãƒ‰** ãƒ–ãƒ©ã‚¦ã‚¶ã‚’èµ·å‹•ã—ã€è¡¨ç¤ºã—ã¦ã„ã‚‹Pixivã®å°èª¬ãƒšãƒ¼ã‚¸ã‹ã‚‰ç›´æ¥EPUBåŒ–ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚URLã‚’ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

- **ã‚¹ãƒãƒ¼ãƒˆãªURL/IDå‡¦ç†**  
  URLã‚„IDã‚’æ¸¡ã™ã ã‘ã§ã€å˜ä¸€ã®å°èª¬ãƒ»ã‚·ãƒªãƒ¼ã‚ºãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œå“ã‹ã‚’è‡ªå‹•ã§åˆ¤åˆ¥ã—ã¦ä¸€æ‹¬å‡¦ç†ã—ã¾ã™ã€‚

- **Pixivç‹¬è‡ªã‚¿ã‚°å¤‰æ›**  
  `[newpage]`, `[chapter:]`, `[[rb:...]]` ãªã©ã®ã‚¿ã‚°ã‚’é©åˆ‡ã«è§£é‡ˆã—ã€XHTMLã«å¤‰æ›ã—ã¾ã™ã€‚

- **æŸ”è»Ÿãªç”»åƒå‡¦ç†**  
  ã‚«ãƒãƒ¼ç”»åƒã¨æœ¬æ–‡ä¸­ã®æŒ¿çµµã‚’è‡ªå‹•ã§å–å¾—ãƒ»åŒæ¢±ã—ã¾ã™ã€‚pngquantãªã©ã®å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã¨é€£æºã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’æœ€é©åŒ–ã™ã‚‹ç”»åƒåœ§ç¸®ã‚‚å¯èƒ½ã§ã™ã€‚

- **ãƒ¢ãƒ€ãƒ³ãªCLI**  
  `rich` ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã‚‹è¦‹ã‚„ã™ã„ãƒ­ã‚°å‡ºåŠ›ã‚„ã€ç›´æ„Ÿçš„ãªã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ä½“ç³»ã‚’æä¾›ã—ã¾ã™ã€‚

---

## ğŸ“¦ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ [uv](https://github.com/astral-sh/uv) ã§ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã¨ç’°å¢ƒæ§‹ç¯‰

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/118-Oganesson/pixiv2epub.git
cd pixiv2epub

# 2. uvã§ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆã—ã€æœ‰åŠ¹åŒ–
uv venv
source .venv/bin/activate  # macOS / Linux
# .venv\Scripts\activate   # Windows

# 3. é–‹ç™ºãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
uv sync

# 4. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
poe setup
```

`poe setup` ã‚³ãƒãƒ³ãƒ‰ã¯ã€`pyproject.toml` ã«å®šç¾©ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã—ã€ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ Playwright ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’è‡ªå‹•ã§è¡Œã„ã¾ã™ã€‚

---

### 2. Pixivèªè¨¼

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãƒ–ãƒ©ã‚¦ã‚¶ãŒèµ·å‹•ã—ã¾ã™ã€‚è¡¨ç¤ºã•ã‚ŒãŸã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§Pixivã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚
ãƒ­ã‚°ã‚¤ãƒ³ãŒæˆåŠŸã™ã‚‹ã¨ã€èªè¨¼æƒ…å ±ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã® `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã€GUIãƒ¢ãƒ¼ãƒ‰ç”¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ« (`.gui_session`) ã«è‡ªå‹•ã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚

```bash
pixiv2epub auth
```

> **Note**
> ã“ã®èªè¨¼ã‚¹ãƒ†ãƒƒãƒ—ã¯åˆå›ã®ã¿å¿…è¦ã§ã™ã€‚ä¸€åº¦ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã‚Œã°ã€ä»¥é™ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«è‡ªå‹•ã§èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚

---

## ğŸš€ ä½¿ã„æ–¹

### åŸºæœ¬çš„ãªä½¿ã„æ–¹ (ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ & EPUBç”Ÿæˆ)

`run` ã‚³ãƒãƒ³ãƒ‰ã«å°èª¬ã®URLã¾ãŸã¯IDã‚’æ¸¡ã™ã ã‘ã§ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‹ã‚‰EPUBç”Ÿæˆã¾ã§ã‚’ä¸€åº¦ã«è¡Œã„ã¾ã™ã€‚

```bash
# å°èª¬ã®URLã‚’æŒ‡å®š
pixiv2epub run "https://www.pixiv.net/novel/show.php?id=12345678"

# ã‚·ãƒªãƒ¼ã‚ºãƒšãƒ¼ã‚¸ã®URLã‚’æŒ‡å®š
pixiv2epub run "https://www.pixiv.net/novel/series/987654"

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒšãƒ¼ã‚¸ã®URLã‚’æŒ‡å®š (å…¨ä½œå“ãŒå¯¾è±¡)
pixiv2epub run "https://www.pixiv.net/users/58182393"
```

---

### GUIãƒ¢ãƒ¼ãƒ‰ã®ä½¿ã„æ–¹

ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ç›´æ¥æ“ä½œã—ãŸã„å ´åˆã¯ `gui` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```bash
pixiv2epub gui
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ­ã‚°ã‚¤ãƒ³ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒä¿å­˜ã•ã‚ŒãŸãƒ–ãƒ©ã‚¦ã‚¶ãŒèµ·å‹•ã—ã¾ã™ã€‚
Pixivã®å°èª¬ãƒ»ã‚·ãƒªãƒ¼ã‚ºãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒšãƒ¼ã‚¸ã‚’é–‹ãã¨ã€ç”»é¢ä¸Šã«EPUBåŒ–ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ãƒœã‚¿ãƒ³ãŒè‡ªå‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚ãã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã ã‘ã§ã€è¡¨ç¤ºä¸­ã®ãƒšãƒ¼ã‚¸ã®ä½œå“ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€EPUBã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

---

### ç™ºå±•çš„ãªä½¿ã„æ–¹

#### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã®ã¿å®Ÿè¡Œ

```bash
pixiv2epub download "https://www.pixiv.net/novel/show.php?id=12345678"
# > â„¹ï¸ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸ: ./.Workspace/pixiv_12345678
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰EPUBã‚’ç”Ÿæˆ

```bash
pixiv2epub build ./.Workspace/pixiv_12345678
# > â„¹ï¸ ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸ: ./Epubs/ä½œè€…å/[12345678] å°èª¬ã‚¿ã‚¤ãƒˆãƒ«.epub
```

---

## âš™ï¸ è¨­å®šã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

EPUBã®å‡ºåŠ›å…ˆã‚„ãƒ•ã‚¡ã‚¤ãƒ«åã®å½¢å¼ãªã©ã‚’å¤‰æ›´ã—ãŸã„å ´åˆã¯ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

1. `config.example.toml` ã‚’ `config.toml` ãªã©ã®åå‰ã§ã‚³ãƒ”ãƒ¼ã€‚
2. ã‚³ãƒ”ãƒ¼ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦è¨­å®šã‚’å¤‰æ›´ã€‚
3. `-c` ã¾ãŸã¯ `--config` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æŒ‡å®šã€‚

```bash
pixiv2epub run 12345678 -c config.toml
```

è¨­å®šå¯èƒ½ãªé …ç›®ã®è©³ç´°ã¯ `config.example.toml` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## âŒ¨ï¸ ã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³

```text
usage: pixiv2epub [-h] [-v] {auth,run,download,build} ...

options:
  -h, --help            Show this help message and exit
  -v, --verbose         Enable detailed debug logging.
```

---

### `auth`

ãƒ–ãƒ©ã‚¦ã‚¶ã§Pixivã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã€èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚

```text
usage: pixiv2epub auth [-h]

options:
  -h, --help  Show this help message and exit
```

---

### `run`

æŒ‡å®šã•ã‚ŒãŸURLã¾ãŸã¯IDã®å°èª¬ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€EPUBã‚’ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚

```text
usage: pixiv2epub run [-h] [-c CONFIG] input

positional arguments:
  input                 URL or ID of the Pixiv novel, series, or user.

options:
  -h, --help            Show this help message and exit
  -c CONFIG, --config CONFIG
                        Path to a custom TOML configuration file.
```

---

### `download`

å°èª¬ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã ã‘ã§çµ‚äº†ã—ã¾ã™ã€‚

```text
usage: pixiv2epub download [-h] [-c CONFIG] input

positional arguments:
  input                 URL or ID of the Pixiv novel, series, or user.

options:
  -h, --help            Show this help message and exit
  -c CONFIG, --config CONFIG
                        Path to a custom TOML configuration file.
```

---

### `build`

æ—¢å­˜ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰EPUBã‚’ãƒ“ãƒ«ãƒ‰ã—ã¾ã™ã€‚

```text
usage: pixiv2epub build [-h] [-c CONFIG] WORKSPACE_PATH

positional arguments:
  WORKSPACE_PATH        Path to the workspace directory to be built.

options:
  -h, --help            Show this help message and exit
  -c CONFIG, --config CONFIG
                        Path to a custom TOML configuration file.
```

---

### `gui`

ãƒ–ãƒ©ã‚¦ã‚¶ã‚’èµ·å‹•ã—ã€Pixivãƒšãƒ¼ã‚¸ä¸Šã§ç›´æ¥æ“ä½œã™ã‚‹GUIãƒ¢ãƒ¼ãƒ‰ã‚’é–‹å§‹ã—ã¾ã™ã€‚

```text
usage: pixiv2epub gui [-h]

options:
  -h, --help  Show this help message and exit
```

---

## âš™ï¸ å®Ÿè¡Œè¦ä»¶

- Python 3.13+
- ï¼ˆä»»æ„ï¼‰ç”»åƒåœ§ç¸®ãƒ„ãƒ¼ãƒ«: `pngquant`, `jpegoptim`, `cwebp` ãŒ PATH ä¸Šã«å¿…è¦ã§ã™ã€‚
